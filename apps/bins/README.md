# üóëÔ∏è West Berkshire Bin Collection Generator

This Python application automates the process of fetching bin collection schedules from the West Berkshire Council API and presenting them in a user-friendly web interface and a subscribable calendar format.

## üöÄ How it Works

The `generate.py` script performs the following steps every time it runs:

### 1. Data Retrieval
- **Randomized UPRN Selection**: To avoid overloading the council's API with requests for the same property, the script randomly selects one of several **UPRNs** (Unique Property Reference Numbers) associated with the target area (**Hanningtons Way**).
- **API Communication**: It sends a secure JSON-RPC request to the West Berkshire Council's backend server to fetch the latest collection data.

### 2. Intelligent Parsing
- **Date Conversion**: The script takes the raw text from the council (e.g., "Tuesday 20 January") and converts it into a real calendar date.
- **Year Rollover**: It automatically detects if a collection date falls in the next calendar year (e.g., when it's December and the next collection is in January).
- **Grouping**: If multiple bins (like Food Waste and Recycling) are collected on the same day, the script groups them together for a cleaner display.

### 3. Web Page Generation (`index.html`)
- **Responsive Design**: Generates a modern, mobile-friendly dashboard showing upcoming collections.
- **Friendly Labels**: Adds helpful labels like **"Today!"** or **"Tomorrow!"** to the dates.
- **Visual Cues**: Uses specific icons and colors for Rubbish, Recycling, and Food Waste to make it easy to read at a glance.
- **Stale Data Warning**: If the script hasn't been run for more than 7 days, a warning message appears on the website to alert users that the data might be outdated.

### 4. Calendar Integration (`bins.ics`)
- **iCalendar Format**: Generates a standard `.ics` file that can be used with Google Calendar, Apple Calendar, and Outlook.
- **Smart Updates**: The script only updates the calendar file if it detects an actual change in the collection dates. This prevents calendar apps from constantly re-syncing unnecessarily.

## üõ†Ô∏è Technical Details

- **Language**: Python 3
- **Dependencies**: Uses standard Python libraries (`urllib`, `json`, `datetime`, `os`, `random`). No external packages are required.
- **Output**: 
  - `index.html`: The main web dashboard.
  - `bins.ics`: The calendar subscription file.

## üìÖ Subscription Options

The generated website provides four ways to stay updated:
1. **Google Calendar**: Direct "Add to Calendar" link.
2. **Apple Calendar**: `webcal://` link for native integration.
3. **Outlook**: Direct link to the ICS file.
4. **Copy URL**: A button to copy the raw calendar link for manual setup in any other app.

---
*Generated by Antigravity*
