<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>My first JavaScript app</title>
    <meta name="description" content="My first ever attempt at using JavaScript. Building a circuit training exercise routine randomiser using Javascript.">
    <meta name="author" content="Mark Evans">
    <meta name="theme-color" content="#ffffff">
    <meta name="view-transition" content="same-origin">
    
    <!--Open Graph protocol meta tags-->
    <meta property="og:type" content="article">
    <meta property="article:author" content="Mark Evans">
    <meta property="og:title" content="My first javascript app">
    <meta property="og:url" content="https://onlyrss.org/posts/my-first-javascript-app.html">
    <meta property="og:image" content="https://onlyrss.org/images/og/exercise-routine-og.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:description" content="My first ever attempt at using JavaScript. Building a circuit training exercise routine randomiser using Javascript.">
    <meta property="article:published_time" content="2022-06-11">

    <!--Favicons and Touch Icons and web manifest-->
    <link rel="icon" href="/pwaicons/favicon.svg">
    <link rel="apple-touch-icon" href="/pwaicons/apple-touch/apple-touch-icon-iphone-60x60.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/pwaicons/apple-touch/apple-touch-icon-ipad-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/pwaicons/apple-touch/apple-touch-icon-iphone-retina-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/pwaicons/apple-touch/apple-touch-icon-ipad-retina-152x152.png">
    <link rel="manifest" href="/manifest.json">

    <!--stylesheet and RSS-->
    <link rel="stylesheet" type="text/css" href="/styles/main69.css">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for OnlyRSS.org" href="/feed.xml">

    <!--load self-hosted fonts-->
    <style>
      @font-face {
        font-family: "Roboto Condensed";
        font-style: normal;
        font-weight: 400;
        font-display: block;
        src: url(/fonts/RobotoCondensed-Regular.woff2) format("woff2");
      }

      @font-face {
        font-family: "Roboto Serif";
        font-style: normal;
        font-weight: 400;
        src: url(/fonts/RobotoSerif-Regular.woff2) format("woff2");
      }

      @font-face {
        font-family: "Roboto Serif";
        font-style: italic;
        font-weight: 400;
        src: url(/fonts/RobotoSerif-Italic.woff2) format("woff2");
      }

      @font-face {
        font-family: "Roboto Serif";
        font-style: normal;
        font-weight: 500;
        src: url(/fonts/RobotoSerif-Medium.woff2) format("woff2");
      }

      @font-face {
        font-family: "Roboto Serif";
        font-style: italic;
        font-weight: 500;
        src: url(/fonts/RobotoSerif-MediumItalic.woff2) format("woff2");
      }
    </style>

    <!-- Service worker for installable app-->
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/service-worker.js");
      }
    </script>
    <script src="../scripts/outline.js"></script>

    <script>
      // get the slider value
      function getNumber() {
        let input = document.getElementById("userInput").value;
        return input;
      }

      // triggered by the main button: set the number of exercises to "n"
      function myFunction() {
        let n = getNumber();

        // clear the list of any existing exercises
        document.getElementById("todays_exercises").innerHTML = "";

        // define the array
        let all_exercises = [
          " air squats ×40",
          " skip ×200",
          " burpees ×20",
          " row 500m",
          " pull-ups ×10",
          " finger board pull-ups ×10",
          " ring pull-ups ×10",
          " sit-ups ×40",
          " press-ups ×25",
          " lunges ×20",
          " curls ×15",
          " ring rows ×12",
          " assisted ring dips ×10",
          " ring push ups ×10",
          " power snatch ×10",
          " power clean ×20",
          " power clean & jerk ×15",
          " hanging leg raises ×20",
          " bench press ×10",
          " calf raises ×20",
          " plank 20s",
          " dips ×20",
          " row 250m",
        ];

        // Set the max value of the slider (with id=userInput) to the # of elements in the array
        document
          .getElementById("userInput")
          .setAttribute("max", all_exercises.length);

        // shuffle the full array
        function shuffleArray(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
        }

        // pull out the first n values from the shuffled array and display as ordered list
        shuffleArray(all_exercises);
        all_exercises.slice(0, n).forEach((e) => {
          todays_exercises.innerHTML =
            todays_exercises.innerHTML + "<li>" + e + "</li>";
        });
      }
    </script>
  </head>

  <body onload="myFunction()">
    
    <header class="nav">
      <nav>
        <ul>
          <li><a href="/index.html" title="Homepage">home</a></li>
          <li><a href="/pages/subscribe.html" title="Subscribe via RSS">rss</a></li>
          <li><a href="/pages/changelog.html" title="View all website updates">changelog</a></li>
          <li><a href="/pages/about.html" title="Who made this site, and why?">about</a></li>
        </ul>
      </nav>
    </header>

    <div class="outline">
      <div>Sections</div>
      <div id="doc_outline"></div>
    </div>

    <article>
      <header>
        <h1 style="view-transition-name: post15">My first JavaScript “app”</h1>
        <div class="tldr">
          <p>
            I created a simple app that selects <i>n</i> random exercises from an array. You'll find the app, and links to the source code (on CodePen) below.
          </p>
        </div>

        <!-- Flexrow -->
        <div class="byline">

          <div>
            <img class="byline-avatar" src="/images/avatar.webp" Alt="The article author's avatar" height="50" width="50" loading="lazy">
          </div>
          
          <div class="byline-copy">
            <time datetime="2022-06-11">11 Jun 2022</time> · <span>4 min</span> · <a href="/pages/about.html" title="About me, and about this website">Mark Evans</a>
          </div>

          <div class="byline-svgs">

            <a href="https://www.reddit.com/submit?url=https://onlyrss.org/posts/my-first-javascript-app.html&title=My%20first%20JavaScript%20app" target="_blank" title="Share this article on Reddit">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.92 14.87c.07.07.07.19 0 .26-.4.4-1.03.6-1.91.6l-.01-.01c-.9 0-1.52-.2-1.92-.59a.18.18 0 0 1 0-.26c.07-.07.2-.07.26 0 .33.32.87.48 1.65.48H12c.8 0 1.33-.16 1.66-.48a.18.18 0 0 1 .26 0Zm-.1-2.86a.79.79 0 0 0-.79.79.79.79 0 0 0 1.58 0 .79.79 0 0 0-.79-.79Zm-2.85.79a.79.79 0 0 0-1.58 0 .79.79 0 0 0 1.58 0ZM21 5v14c0 1-1 2-2 2H5c-1 0-2-1-2-2V5c0-1 1-2 2-2h14c1 0 2 1 2 2Zm-3 6.89a1.33 1.33 0 0 0-2.25-.95 6.8 6.8 0 0 0-3.48-1.02L13 7.58l2 .47v.03a1.09 1.09 0 0 0 2.17 0 1.09 1.09 0 0 0-2.1-.39l-2.16-.5a.18.18 0 0 0-.22.12l-.82 2.6a7 7 0 0 0-3.65 1.01 1.32 1.32 0 1 0-1.57 2.1 2.4 2.4 0 0 0-.04.43c0 1.96 2.4 3.55 5.36 3.55 2.95 0 5.35-1.6 5.35-3.55 0-.13 0-.27-.03-.4.41-.23.7-.66.7-1.16Z"/>
                </svg> 
              </a>

            <a href="https://www.facebook.com/sharer/sharer.php?u=https://onlyrss.org/posts/my-first-javascript-app.html" target="_blank" title="Share this article on Facebook">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 3H5C4 3 3 4 3 5V19C3 20 4 21 5 21H12.615V14.0295H10.269V11.313H12.615V9.30975C12.615 6.98475 14.0347 5.71875 16.1093 5.71875C17.103 5.71875 17.9565 5.793 18.2055 5.826V8.256L16.767 8.25675C15.639 8.25675 15.4208 8.793 15.4208 9.579V11.3138H18.111L17.7607 14.0302H15.4208V21H19C20 21 21 20 21 19V5C21 4 20 3 19 3Z"/>
                </svg> 
              </a>

            <a href="https://twitter.com/intent/tweet?url=https://onlyrss.org/posts/my-first-javascript-app.html&text=My%20first%20JavaScript%20app&via=dbs_sticky" target="_blank" title="Share this article on Twitter">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Zm-2 6.5v.4a7 7 0 0 1-10.8 5.9H7c1 0 2.2-.5 3-1-1 0-2-.8-2.3-1.8l.5.1h.6c-1-.3-2-1.3-2-2.5L8 11a2.8 2.8 0 0 1-1.1-2.2c0-.4 0-.8.3-1.2a7 7 0 0 0 5 2.6v-.6c0-1.4 1-2.5 2.5-2.5.7 0 1.3.3 1.8.8.6-.1 1-.4 1.5-.6a3 3 0 0 1-1.1 1.4c.5-.1 1-.2 1.5-.5-.4.5-.8 1-1.3 1.3H17Z"/>
              </svg>
            </a>

            <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://onlyrss.org/posts/my-first-javascript-app.html&title=My%20first%20JavaScript%20app" target="_blank" title="Share this article on LinkedIn">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2ZM9 17H6.5v-7H9v7ZM7.7 8.7c-.8 0-1.3-.5-1.3-1.2S7 6.3 7.8 6.3c.8 0 1.3.5 1.3 1.2s-.5 1.2-1.4 1.2ZM18 17h-2.4v-3.8c0-1-.7-1.3-1-1.3-.3 0-1 .1-1 1.3V17h-2.5v-7h2.5v1c.3-.6 1-1 2.2-1 1.2 0 2.2 1 2.2 3.2V17Z"/>
              </svg>
            </a>

            <a href="mailto:?subject=OnlyRSS.org%20article:%20My%20first%20JavaScript%20app&body=https://onlyrss.org/posts/my-first-javascript-app.html" target="_blank" title="Share this article via email">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path  d="M3 7.5V19c0 1.1 1 2 2 2h14a2 2 0 0 0 2-2V7.7l-8.9 6.7-9.1-7ZM21 5l-9 6.8L3 5c0-1.1 1-2 2-2h14c1.1 0 2 1 2 2Z"/>
              </svg>
            </a>
          </div>

        </div>  <!--class byline-->
      </header>

      <!--introduction-->
      <section>
        <h2>Background</h2>
        <p>
          I started to build this website in January 2021 with the aim of teaching myself HTML, CSS, and JavaScript. It’s now June 2022, and over the last few months I’ve been asking myself when I’m going to get around to JavaScript.
        </p>
        <p>
          Three days ago, while I was halfway through a circuit training session in my home-gym, I realised that since starting circuit training (about a month ago) I’d been doing the same 6 exercises, and had not added anything new. I was getting stuck in a routine, and decided that I needed to change it up a bit.
        </p>
        <p>
          Rather than create a new routine, or a selection of routines, I decided that it might be interesting if each circuit session included a random selection of exercises. Up to this point my circuit training had consisted of 6 exercises, repeated for 3 circuits. I decided to create a long list of exercises that were practical for my home-gym, and then pick 6 at random for each session. My rule would be simple, whatever was chosen for that session—I had to do—even if it was exercises I disliked (yes, burpees).
        </p>
        <p>
          I could have just written the exercises down on bits of paper and picked them out of a hat, but I’m a nerd, so “complex solutions to trivial problems” is a mantra I live by. My first thought was to use Excel (where non-programming nerds do their data analysis), but then I realised that this was the excuse I needed to start learning JavaScript.
        </p>
      </section>

      <!--My starting point-->
      <section>
        <h2>My starting point</h2>
        <p>
          Like most people writing code, I started with a Google search, i.e. how to pick random elements from an array. That search led me to <a href="https://jsfiddle.net/abdennour/oh3jL82j/"> this example on JSFiddle</a>. The example shuffles an array of numbers, and then slices off the first "n" numbers from the array. It’s this solution that forms the basis of the “app” that I ended up building.
        </p>
      </section>

      <!-- summary - section -->
      <section>
        <h2>The app</h2>
        <p>
          I really want to call it a “programme”, but I feel that doing so puts me in a certain age category, so I’m going to be cool and describe it as an “app”. It’s very basic, you pick the number of exercises you want, and then hit the ‘create new workout’ button, at which point you’re presented with your chosen number of exercises in the form of an ordered list.
        </p>

        <div id="exercise_card">
          <form>
            <label for="points">№ of exercises:</label>
            <input id="userInput" type="range" placeholder="6" value="6" step="1" min="1" max="" oninput="numberOutputId.value = userInput.value">
            <output name="numberOutputName" id="numberOutputId">6</output>
          </form>
          <p>
            <button class="btn" onclick="myFunction()">Create new workout</button>
          </p>
          <ol id="todays_exercises"></ol>
        </div>

        <p>
          You can see my source code over at <a href="https://codepen.io/dbssticky/pen/MWQqXXE">CodePen</a>.
        </p>

        <h3>How it works</h3>
        <p>
          The first thing that happens is that the max value of the slider input control is set to the array size i.e. the total number of possible exercises. Once the button is pressed, the array order is randomised, and then the current slider value is grabbed (i.e. the number of exercises the user has chosen) and that number of exercises is read (in sequence) from the start of the randomised array. Any existing list items (exercises) are cleared from the front-end, and the new exercises are added to an ordered list and displayed to the user.
        </p>

        <h3>Planned improvements</h3>
        <ol>
          <li>Make the app available on a page by itself which is hidden from the usual website navigation.</li>
          <li>Add the hidden page link to the <a href="https://web.dev/app-shortcuts/">PWA app shortcuts</a>. (So I will be able to quickly open the app on my phone, and it will look like a full-page app.)</li>
          <li>Add some rules to tweak the randomised output, e.g. if output includes ring tricep-dips, don’t also include bench tricep-dips etc. Maybe using nested arrays?</li>
        </ol>
        <details class="show-me">
          <summary>
            2 weeks later: View my progress against the planned improvements. Click to
          </summary>
          <ol>
            <li>The app is now available as a standalone page designed for mobile devices: <a href="/apps/circuits.html" target="_blank">click to open app in new tab</a>.</li>
            <li>The app can now be launched from the PWA shortcuts/jumplist on mobile and desktop.</li>
            <li>The app now groups together similar (alternative) exercises and ensures that only one option from each group is selected. <a href="https://stackoverflow.com/questions/72747137/select-x-random-elements-from-an-array-that-contains-nested-arrays-and-no-more">I had to ask for help to get this done</a>. You can see the new version on <a href="https://codepen.io/dbssticky/pen/BarBKOo">CodePen</a>.</li>
          </ol>
        </details>
      </section>

      <!--What I learnt-->
      <section>
        <h2>What I learnt</h2>
        <p>
          During the 3 days I spent working on the app (a couple of hours each day), I learnt:
        </p>
        <ul>
          <li>How to create a simple array</li>
          <li>How to calculate the length of an array</li>
          <li>How to get user input and set it as a variable</li>
          <li>How to apply a variable to a HTML element’s attribute</li>
          <li>How to run a function on page load</li>
          <li>How to pass an array into an Ordered List</li>
          <li>That there’s <a href="https://bost.ocks.org/mike/shuffle/compare.html">lots of different ways</a> to randomise using JavaScript</li>
          <li>That ring tricep-dips are really hard!</li>
        </ul>
      </section>

      <!-- feedback -->
      <footer>
        <p>
          If you have any comments on this article then please get in touch via <a href="https://twitter.com/dbs_sticky" title="My Twitter profile" target="_blank">Twitter</a> or <a href="https://mastodon.social/@DBSSticky#" title="My Mastodon profile" target="_blank">Mastodon</a>.
        </p>
      </footer>

    </article>

    <script>
      // Call the function to create and display the outline
      createHeadingsOutline();
      createFiguresOutline();
    </script>

  </body>
</html>
